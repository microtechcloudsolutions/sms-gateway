const Queue = require('../index');
const now = Date.now();
var queue = new Queue('jobs3', {
  limiter: {
    max: 1,
    duration: 3000
  }
});

queue.isReady().then(function() {
  console.log('queue is ready');

  var counter = 0;
  queue.process('test', function() {
    console.log('Function counter: ' + counter, Date.now() - now);
    counter++;
  });

  for (var x = 0; x < 1000; x++) {
    queue.add('test');
  }
});